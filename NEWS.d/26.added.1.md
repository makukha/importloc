Module import is now atomic: previous state is restored on import error
